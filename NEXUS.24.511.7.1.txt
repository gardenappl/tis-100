@0
ADD UP
MOV ACC,DOWN

@1
ADD UP
MOV ACC,DOWN
MOV ACC,DOWN

@2
ADD UP
MOV ACC,DOWN
MOV ACC,DOWN

@3
ADD UP
MOV ACC,DOWN

@4
MOV UP,ACC
MOV ACC,RIGHT
MOV ACC,RIGHT

@5
BEG:MOV UP,ACC
    SUB LEFT
    JGZ MAX
    MOV LEFT,ACC
    MOV ACC,RIGHT
    MOV ACC,RIGHT
    MOV 2,DOWN#-RI
    MOV UP,NIL
    JMP BEG
MAX:MOV UP,ACC
    MOV ACC,RIGHT
    MOV ACC,RIGHT
    MOV 1,DOWN#F2
    MOV LEFT,NIL

@6
BEG:MOV UP,ACC
    SUB LEFT
    JGZ MAX
    MOV LEFT,RIGHT
    MOV 0,DOWN#RI
    MOV UP,NIL
    JMP BEG
MAX:MOV UP,RIGHT
    MOV 1,DOWN#F3
    MOV LEFT,NIL

@7
BEG:MOV UP,ACC
    SUB LEFT
    JGZ MAX
    MOV 4,DOWN#END
    JMP BEG
MAX:MOV 3,DOWN#F4

@8
MOV 1,RIGHT#F1

@9
-LE:JRO LEFT
F1: MOV 1,ACC
-UP:JRO UP
F2: MOV 2,ACC
-RI:JRO RIGHT
F3: MOV 3,ACC
    JMP -RI
F4: MOV 4,ACC
END:MOV ACC,DOWN

@10
MOV UP,LEFT
MOV RIGHT,LEFT

@11
MOV UP,LEFT
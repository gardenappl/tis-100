@0


@1
LOOP:MOV UP,ACC
JEZ ENDS
MOV ACC,DOWN
JMP LOOP
ENDS:MOV 999,DOWN

@2
LOOP:MOV UP,ACC
JEZ ENDS
MOV ACC,DOWN
JMP LOOP
ENDS:MOV 998,DOWN

@3
# A PROVIDER
NEXA:MOV UP,ACC
INST:JRO RIGHT
GETA:MOV ACC,RIGHT
JMP INST

@4
L:MOV DOWN,LEFT
MOV 1,LEFT#GETA
MOV 1,RIGHT#GETB
MOV LEFT,ACC
SUB RIGHT
MOV 1,RIGHT#GETB
JGZ A>B
ADD RIGHT
MOV -1,LEFT#NEXA
MOV ACC,DOWN
JMP L
A>B:MOV RIGHT,DOWN
MOV -1,RIGHT#NEXB

@5
# B PROVIDER
NEXA:MOV UP,ACC
INST:JRO LEFT
GETA:MOV ACC,LEFT
JMP INST

@6


@7


@8
MOV 0,UP#A::INST
LOOP:MOV UP,ACC
SUB 998
JEZ ENDS
ADD 998
MOV 0,UP#A::INST
MOV ACC,DOWN
JMP LOOP
ENDS:MOV 0,DOWN
MOV -1,UP#A::NEXA
JMP LOOP
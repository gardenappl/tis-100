@0
MOV DOWN,RIGHT

@1
-IN:JRO LEFT
BEG:!MOV 17,ACC
LIN:MOV 1,DOWN#BEG
    MOV ACC,DOWN
    SUB 4
    SWP
    MOV 30,ACC
PIX:SUB 8
    MOV 6,DOWN#DEC
    JGZ PIX
    MOV 4,DOWN#END
    SWP
    JGZ LIN
    MOV 1,RIGHT#BE
RIP:JMP RIP

@2
MOV LEFT,DOWN

@3
MOV DOWN,RIGHT

@4
-IN:JRO LEFT
BEG:!MOV 14,ACC
LIN:MOV 1,DOWN#BE
    MOV ACC,DOWN
    SUB 4
    SWP
    MOV 8,DOWN#ALT
    MOV 24,ACC
PIX:SUB 8
    MOV 6,DOWN#INC
    JGZ PIX
    MOV 4,DOWN#END
    SWP
    JGZ LIN
    MOV 1,UP#BEG

@5
-IN:JRO ANY
BEG:MOV 0,DOWN
    MOV LAST,DOWN
    JMP -IN
END:MOV -1,DOWN
    JMP -IN
DEC:MOV 1,DOWN
    MOV 0,DOWN
ALT:MOV 3,DOWN
    MOV 2,DOWN
    MOV 1,DOWN
    MOV 0,DOWN
    MOV 3,DOWN
    MOV 2,DOWN

@6
-IN:JRO UP
BEG:!MOV 15,ACC
LIN:MOV 1,LEFT#BEG
    MOV ACC,LEFT
    SUB 4
    SWP
    MOV 8,LEFT#ALT
    MOV 24,ACC
PIX:SUB 8
    MOV 6,LEFT#DEC
    JGZ PIX
    MOV 4,LEFT#END
    SWP
    JGZ LIN

@7
    MOV 20,ACC
LIN:MOV 1,RIGHT#BE
    SUB 4
    MOV ACC,RIGHT
    SWP
    MOV 30,ACC
PIX:SUB 8
    MOV 6,RIGHT#IN
    JGZ PIX
    MOV 4,RIGHT#EN
    SWP
    JGZ LIN
    MOV 1,UP#BEG
RIP:JMP RIP

@8
-IN:JRO ANY
BEG:MOV 0,RIGHT
    MOV LAST,RIGHT
    JMP -IN
END:MOV -1,RIGHT
    JMP -IN
INC:MOV 0,RIGHT
    MOV 1,RIGHT
ALT:MOV 2,RIGHT
    MOV 3,RIGHT
    MOV 0,RIGHT
    MOV 1,RIGHT
    MOV 2,RIGHT
    MOV 3,RIGHT

@9
MOV ANY,DOWN

@10

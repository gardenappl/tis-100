@0
BEG:MOV UP,ACC
    JEZ PUT
    MOV UP,RIGHT
    MOV 1,RIGHT#GE
    JMP BEG
PUT:MOV UP,RIGHT
    MOV 9,RIGHT#PU
    MOV UP,DOWN

@1
    MOV 1,DOWN#RET
    MOV LEFT,DOWN
    MOV LEFT,ACC
    MOV ACC,DOWN
    MOV 7,DOWN
    SWP
    MOV 7,ACC
IND:MOV 7,DOWN#OP
    SWP
    MOV ACC,DOWN
    SWP
    SUB 1
    MOV ACC,DOWN
    JGZ IND

@2


@3
    MOV 8,ACC
INI:MOV 0,DOWN
    SUB 1
    JGZ INI
-IN:JRO RIGHT
UP: MOV DOWN,UP
    JMP -IN
DWN:MOV UP,ACC
-SK:JRO RIGHT
GET:MOV ACC,RIGHT
    JMP PAS
PUT:MOV RIGHT,ACC
PAS:MOV ACC,DOWN
    JMP -IN

@4
-IN:JRO RIGHT
GET:MOV 3,LEFT#DWN
-GE:JRO RIGHT
GDO:MOV 1,LEFT#GET
    MOV LEFT,DOWN
    JMP -IN
GNO:JMP PNO
RET:MOV 1,LEFT#UP
    JMP -IN
PUT:MOV 3,LEFT#DWN
-PU:JRO RIGHT
PDO:MOV 3,LEFT#PUT
    MOV UP,LEFT
    JMP -IN
PNO:MOV 4,LEFT#PAS

@5
-IN:JRO UP
RET:MOV 8,ACC
CNT:MOV 7,LEFT#RET
    SUB 1
    JGZ CNT
    MOV UP,ACC
    SAV
OP: MOV UP,LEFT
    SUB UP
    JEZ IND
    MOV 4,LEFT#*NO
    JMP OPE
IND:MOV 1,LEFT#*DO
OPE:SWP
    SAV

@6


@7
MOV UP,DOWN

@8
